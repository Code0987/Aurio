<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Aurio by protyposis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Aurio</h1>
      <h2 class="project-tagline">Audio Fingerprinting &amp; Retrieval for .NET</h2>
      <a href="https://github.com/protyposis/Aurio" class="btn">View on GitHub</a>
      <a href="https://github.com/protyposis/Aurio/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/protyposis/Aurio/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="aurio-audio-processing-analysis-and-retrieval" class="anchor" href="#aurio-audio-processing-analysis-and-retrieval" aria-hidden="true"><span class="octicon octicon-link"></span></a>Aurio: Audio Processing, Analysis and Retrieval</h1>

<p>Aurio is a .NET library that focuses on audio processing, analysis, media synchronization and media retrieval and implements various audio fingerprinting methods. It has been developed for research purposes and is a by-product of the media synchronization application <a href="https://github.com/protyposis/AudioAlign">AudioAlign</a>.</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>32-bit floating point audio processing engine</li>
<li>File I/O through NAudio and FFmpeg</li>
<li>Audio playback through NAudio</li>
<li>FFT through PFFFT, FFTW (optional) and Exocortex.DSP (optional)</li>
<li>Resampling through Soxr and SecretRabbitCode/libsamplerate (optional)</li>
<li>STFT</li>
<li>Chroma</li>
<li>Dynamic Time Warping</li>
<li>On-line Time Warping (Dixon, Simon. "Live tracking of musical performances using on-line time warping." Proceedings of the 8th International Conference on Digital Audio Effects. 2005.)</li>
<li>Fingerprinting

<ul>
<li> Haitsma, Jaap, and Ton Kalker. "A highly robust audio fingerprinting system." ISMIR. 2002.</li>
<li> Wang, Avery. "An Industrial Strength Audio Search Algorithm." ISMIR. 2003.</li>
<li> <a href="http://echoprint.me/codegen">Echoprint</a> (Ellis, Daniel PW, Brian Whitman, and Alastair Porter. "Echoprint: An open music identification service." ISMIR. 2011.)</li>
<li> AcoustID <a href="https://acoustid.org/chromaprint">Chromaprint</a>
</li>
</ul>
</li>
</ul>

<p>All audio processing (incl. fingerprinting) is stream-based and supports processing of arbitrarily long streams at constant memory usage. All fingerprinting methods are implemented from scratch, not ports from exisiting libraries, while keeping compatibility where possible.</p>

<p>Aurio.WaveControls provides WPF widgets for user interfaces:</p>

<ul>
<li>Spectrogram / Chromagram View</li>
<li>Spectrum / Graph View</li>
<li>VU Meter</li>
<li>Correlometer</li>
<li>Time Scale</li>
<li>Wave View</li>
</ul>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>Windows</li>
<li>Visual Studio 2013</li>
<li>.NET Framework 4.0</li>
</ul>

<p>Aurio has been developed for Windows but since only a small part depends on the OS, it should be portable to the Mono platform and other OS'.</p>

<h2>
<a id="build-instructions" class="anchor" href="#build-instructions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build Instructions</h2>

<p>Aurio comes with all required dependencies except for FFmpeg (which would blow up the repo size too much). See <code>libs\ffmpeg\ffmpeg-prepare.txt</code> for instructions on how to download and where to put FFmpeg.</p>

<p>Building works as easy as building any other Visual Studio solution and should work without problems if all dependencies have been set up correctly. Open the Visual Studio solution <code>Aurio\Aurio.sln</code> in Visual Studio 2013 and build the <code>Aurio</code> project and optionally the <code>Aurio.WaveControls</code> project. The compiled DLLs will be built in each project's <code>bin</code> folder.</p>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p>Not available yet. If you have any questions, feel free to open an issue!</p>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h2>

<h3>
<a id="reading-processing--writing" class="anchor" href="#reading-processing--writing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reading, Processing &amp; Writing</h3>

<div class="highlight highlight-csharp"><pre><span class="pl-c">/* Read a high definition MKV video file with FFmpeg, </span>
<span class="pl-c"> * convert it to telephone sound quality, </span>
<span class="pl-c"> * and write it to a WAV file with NAudio. */</span>
<span class="pl-k">var</span> sourceStream = <span class="pl-k">new</span> FFmpegSourceStream(<span class="pl-k">new</span> FileInfo(<span class="pl-s"><span class="pl-pds">"</span>high-definition-video.mkv<span class="pl-pds">"</span></span>));
<span class="pl-k">var</span> ieee32BitStream = <span class="pl-k">new</span> IeeeStream(sourceStream);
<span class="pl-k">var</span> monoStream = <span class="pl-k">new</span> MonoStream(ieee32BitStream);
<span class="pl-k">var</span> resamplingStream = <span class="pl-k">new</span> ResamplingStream(monoStream, ResamplingQuality.Low, <span class="pl-c1">8000</span>);
<span class="pl-k">var</span> sinkStream = <span class="pl-k">new</span> NAudioSinkStream(resamplingStream);
WaveFileWriter.CreateWaveFile(<span class="pl-s"><span class="pl-pds">"</span>telephone-audio.wav<span class="pl-pds">"</span></span>, sinkStream);</pre></div>

<h3>
<a id="short-time-fourier-transform" class="anchor" href="#short-time-fourier-transform" aria-hidden="true"><span class="octicon octicon-link"></span></a>Short-time Fourier Transform</h3>

<div class="highlight highlight-csharp"><pre><span class="pl-c">// Setup STFT with a window size of 100ms and an overlap of 50ms</span>
<span class="pl-k">var</span> source = AudioStreamFactory.FromFileInfoIeee32(<span class="pl-k">new</span> FileInfo(<span class="pl-s"><span class="pl-pds">"</span>somefilecontainingaudio.ext<span class="pl-pds">"</span></span>));
<span class="pl-k">var</span> windowSize = source.Properties.SampleRate/<span class="pl-c1">10</span>;
<span class="pl-k">var</span> hopSize = windowSize/<span class="pl-c1">2</span>;
<span class="pl-k">var</span> stft = <span class="pl-k">new</span> STFT(source, windowSize, hopSize, WindowType.Hann);
<span class="pl-k">var</span> spectrum = <span class="pl-k">new</span> <span class="pl-k">float</span>[windowSize/<span class="pl-c1">2</span>];

<span class="pl-c">// Read all frames and get their spectrum</span>
<span class="pl-k">while</span> (stft.HasNext()) {
    stft.ReadFrame(spectrum);
    <span class="pl-c">// do something with the spectrum (e.g. build spectrogram)</span>
}</pre></div>

<h3>
<a id="generate-fingerprints" class="anchor" href="#generate-fingerprints" aria-hidden="true"><span class="octicon octicon-link"></span></a>Generate fingerprints</h3>

<div class="highlight highlight-csharp"><pre><span class="pl-c">// Setup the source (AudioTrack is Aurio's internal representation of an audio file)</span>
<span class="pl-k">var</span> audioTrack = <span class="pl-k">new</span> AudioTrack(<span class="pl-k">new</span> FileInfo(<span class="pl-s"><span class="pl-pds">"</span>somefilecontainingaudio.ext<span class="pl-pds">"</span></span>));

<span class="pl-c">// Setup the fingerprint generator (each fingerprinting algorithms has its own namespace but works the same)</span>
<span class="pl-k">var</span> defaultProfile = FingerprintGenerator.GetProfiles()[<span class="pl-c1">0</span>]; <span class="pl-c">// the first one is always the default profile</span>
<span class="pl-k">var</span> generator = <span class="pl-k">new</span> FingerprintGenerator(defaultProfile);

<span class="pl-c">// Setup the generator event listener</span>
generator.SubFingerprintsGenerated += (sender, e) =&gt; {
    <span class="pl-c">// Print the hashes</span>
    e.SubFingerprints.ForEach(sfp =&gt; Console.WriteLine(<span class="pl-s"><span class="pl-pds">"</span>{0,10}: {1}<span class="pl-pds">"</span></span>, sfp.Index, sfp.Hash));
};

<span class="pl-c">// Generate fingerprints for the whole track</span>
generator.Generate(audioTrack);</pre></div>

<h3>
<a id="fingerprinting--matching" class="anchor" href="#fingerprinting--matching" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fingerprinting &amp; Matching</h3>

<div class="highlight highlight-csharp"><pre><span class="pl-c">// Setup the sources</span>
<span class="pl-k">var</span> audioTrack1 = <span class="pl-k">new</span> AudioTrack(<span class="pl-k">new</span> FileInfo(<span class="pl-s"><span class="pl-pds">"</span>somefilecontainingaudio1.ext<span class="pl-pds">"</span></span>));
<span class="pl-k">var</span> audioTrack2 = <span class="pl-k">new</span> AudioTrack(<span class="pl-k">new</span> FileInfo(<span class="pl-s"><span class="pl-pds">"</span>somefilecontainingaudio2.ext<span class="pl-pds">"</span></span>));

<span class="pl-c">// Setup the fingerprint generator</span>
<span class="pl-k">var</span> defaultProfile = FingerprintGenerator.GetProfiles()[<span class="pl-c1">0</span>];
<span class="pl-k">var</span> generator = <span class="pl-k">new</span> FingerprintGenerator(defaultProfile);

<span class="pl-c">// Create a fingerprint store</span>
<span class="pl-k">var</span> store = <span class="pl-k">new</span> FingerprintStore(defaultProfile);

<span class="pl-c">// Setup the generator event listener (a subfingerprint is a hash with its temporal index)</span>
generator.SubFingerprintsGenerated += (sender, e) =&gt; {
    <span class="pl-k">var</span> progress = (<span class="pl-k">double</span>)e.Index / e.Indices;
    <span class="pl-k">var</span> hashes = e.SubFingerprints.Select(sfp =&gt; sfp.Hash);
    store.Add(e);
};

<span class="pl-c">// Generate fingerprints for both tracks</span>
generator.Generate(audioTrack1);
generator.Generate(audioTrack2);

<span class="pl-c">// Check if tracks match</span>
<span class="pl-k">if</span> (store.FindAllMatches().Count &gt; <span class="pl-c1">0</span>) {
   Console.WriteLine(<span class="pl-s"><span class="pl-pds">"</span>overlap detected!<span class="pl-pds">"</span></span>); 
}</pre></div>

<h3>
<a id="multitrack-audio-playback" class="anchor" href="#multitrack-audio-playback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Multitrack audio playback</h3>

<div class="highlight highlight-csharp"><pre><span class="pl-k">var</span> drumTrack = <span class="pl-k">new</span> AudioTrack(<span class="pl-k">new</span> FileInfo(<span class="pl-s"><span class="pl-pds">"</span>drums.wav<span class="pl-pds">"</span></span>));
<span class="pl-k">var</span> guitarTrack = <span class="pl-k">new</span> AudioTrack(<span class="pl-k">new</span> FileInfo(<span class="pl-s"><span class="pl-pds">"</span>guitar.wav<span class="pl-pds">"</span></span>));
<span class="pl-k">var</span> vocalTrack = <span class="pl-k">new</span> AudioTrack(<span class="pl-k">new</span> FileInfo(<span class="pl-s"><span class="pl-pds">"</span>vocals.wav<span class="pl-pds">"</span></span>));
<span class="pl-k">var</span> band = <span class="pl-k">new</span> TrackList&lt;AudioTrack&gt;(<span class="pl-k">new</span>[] {drumTrack, guitarTrack, vocalTrack});

<span class="pl-k">new</span> MultitrackPlayer(band).Play();</pre></div>

<h2>
<a id="example-applications" class="anchor" href="#example-applications" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Applications</h2>

<p>Aurio comes with a few tools and test applications that can be taken as a reference:</p>

<ul>
<li>
<strong>Aurio.Test.FingerprintingBenchmark</strong> runs a file through all fingerprinting algorithms and measures the required time.</li>
<li>
<strong>Aurio.Test.FingerprintingHaitsmaKalker</strong> fingerprints files and builds a hash store to match the fingerprinted files. The matches can be browsed and fingerprints inspected.</li>
<li>
<strong>Aurio.Test.FingerprintingWang2003</strong> display the spectrogram and constellation map while fingerprinting a file.</li>
<li>
<strong>Aurio.Test.WaveViewControl</strong> is a test bed for the WaveView WPF control.</li>
<li>
<strong>Aurio.Test.MultitrackPlayback</strong> is a multitrack audio player with a simple user interface.</li>
<li>
<strong>BatchResampler</strong> resamples wave files according to a configuration file.</li>
<li>
<strong>MusicDetector</strong> analyzes audio files for music content.</li>
<li>
<strong>WaveCutter</strong> cuts a number of concatenated files into slices of random length.</li>
</ul>

<p>Aurio has originally been developed for <a href="https://github.com/protyposis/AudioAlign">AudioAlign</a>, a tool to automatically synchronize overlapping audio and video recordings, which uses almost all functionality of Aurio. Its sources are also available and can be used as a implementation reference.</p>

<h2>
<a id="patents" class="anchor" href="#patents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Patents</h2>

<p>The fingerprinting methods by Haitsma&amp;Kalker and Wang are protected worldwide, and Echoprint is protected in the US by patents. Their usage is therefore severely limited. In Europe, patented methods can be used privately or for research purposes.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Copyright (C) 2010-2015 Mario Guggenberger <a href="mailto:mg@protyposis.net">mg@protyposis.net</a>.
This project is released under the terms of the GNU Affero General Public License. See <code>LICENSE</code> for details. The library can be built to be free of any copyleft requirements; get in touch if the AGPL does not suit your needs.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/protyposis/Aurio">Aurio</a> is maintained by <a href="https://github.com/protyposis">protyposis</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-52949511-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
